2025-01-17 10:28:27.255 +04:00 [INF] Starting database migration. Connection String: Host=admindb;Port=5432;Database=OnAimAdmin;Username=postgres;Password=Test1234!;Pooling=true;
2025-01-17 10:28:29.680 +04:00 [ERR] An error occurred while applying migrations.
System.Net.Sockets.SocketException (0x00002AF9): No such host is known.
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses, AddressFamily addressFamily, Nullable`1 startingTimestamp)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress, AddressFamily family)
   at Npgsql.Internal.NpgsqlConnector.Connect(NpgsqlTimeout timeout)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.GetAppliedMigrations()
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
2025-01-17 10:28:29.898 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:28:30.037 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:28:30.078 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:28:30.078 +04:00 [INF] Hosting environment: Development
2025-01-17 10:28:30.079 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:28:30.580 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:28:30.696 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 34.3103 ms
2025-01-17 10:28:30.701 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 124.1284ms
2025-01-17 10:28:30.703 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:28:30.705 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:28:30.709 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.6113ms
2025-01-17 10:28:30.832 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 129.707ms
2025-01-17 10:28:30.854 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:28:30.865 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/favicon-32x32.png - null null
2025-01-17 10:28:30.872 +04:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-01-17 10:28:30.873 +04:00 [INF] HTTP GET /swagger/favicon-32x32.png responded 200 in 5.6568 ms
2025-01-17 10:28:30.874 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/favicon-32x32.png - 200 628 image/png 8.4672ms
2025-01-17 10:28:31.322 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 465.5475 ms
2025-01-17 10:28:31.323 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 468.5971ms
2025-01-17 10:28:33.485 +04:00 [INF] Request starting HTTP/1.1 HEAD http://localhost:5192/ - null null
2025-01-17 10:28:33.488 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:28:33.723 +04:00 [INF] HTTP HEAD / responded 404 in 236.5584 ms
2025-01-17 10:28:33.725 +04:00 [INF] Request finished HTTP/1.1 HEAD http://localhost:5192/ - 404 null null 239.6933ms
2025-01-17 10:28:33.728 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: HEAD http://localhost:5192/, Response status code: 404
2025-01-17 10:30:05.350 +04:00 [INF] Starting database migration. Connection String: Host=admindb;Port=5432;Database=OnAimAdmin;Username=postgres;Password=Test1234!;Pooling=true;
2025-01-17 10:30:07.731 +04:00 [ERR] An error occurred while applying migrations.
System.Net.Sockets.SocketException (0x00002AF9): No such host is known.
   at System.Net.Dns.GetHostEntryOrAddressesCore(String hostName, Boolean justAddresses, AddressFamily addressFamily, Nullable`1 startingTimestamp)
   at System.Net.Dns.GetHostAddresses(String hostNameOrAddress, AddressFamily family)
   at Npgsql.Internal.NpgsqlConnector.Connect(NpgsqlTimeout timeout)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.GetAppliedMigrations()
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
2025-01-17 10:30:07.865 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:30:07.973 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:30:08.008 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:30:08.009 +04:00 [INF] Hosting environment: Development
2025-01-17 10:30:08.010 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:30:08.478 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:30:08.564 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 30.7285 ms
2025-01-17 10:30:08.566 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:30:08.567 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 91.744ms
2025-01-17 10:30:08.571 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 3.4654ms
2025-01-17 10:30:08.571 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:30:08.590 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 18.7657ms
2025-01-17 10:30:08.607 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:30:08.942 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 333.4398 ms
2025-01-17 10:30:08.943 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 336.611ms
2025-01-17 10:30:13.969 +04:00 [INF] Request starting HTTP/1.1 HEAD http://localhost:5192/ - null null
2025-01-17 10:30:13.972 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:30:14.069 +04:00 [INF] HTTP HEAD / responded 404 in 98.7967 ms
2025-01-17 10:30:14.070 +04:00 [INF] Request finished HTTP/1.1 HEAD http://localhost:5192/ - 404 null null 101.6075ms
2025-01-17 10:30:14.073 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: HEAD http://localhost:5192/, Response status code: 404
2025-01-17 10:31:13.187 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:31:13.193 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:31:13.353 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:31:15.733 +04:00 [ERR] An error occurred using the connection to database 'OnAimAdmin' on server 'tcp://admindb:5432'.
2025-01-17 10:31:15.737 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'OnAim.Admin.Infrasturcture.Persistance.Data.Admin.DatabaseContext'.
System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.NameResolutionPal.ProcessResult(SocketError errorCode, GetAddrInfoExContext* context)
   at System.Net.NameResolutionPal.GetAddressInfoExCallback(Int32 error, Int32 bytes, NativeOverlapped* overlapped)
--- End of stack trace from previous location ---
   at System.Net.Dns.<GetAddrInfoWithTelemetryAsync>g__CompleteAsync|34_0[T](Task task, String hostName, Int64 startingTimestamp)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync[TResult](Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.NameResolutionPal.ProcessResult(SocketError errorCode, GetAddrInfoExContext* context)
   at System.Net.NameResolutionPal.GetAddressInfoExCallback(Int32 error, Int32 bytes, NativeOverlapped* overlapped)
--- End of stack trace from previous location ---
   at System.Net.Dns.<GetAddrInfoWithTelemetryAsync>g__CompleteAsync|34_0[T](Task task, String hostName, Int64 startingTimestamp)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync[TResult](Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-01-17 10:31:15.871 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 2678.5211 ms
System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.NameResolutionPal.ProcessResult(SocketError errorCode, GetAddrInfoExContext* context)
   at System.Net.NameResolutionPal.GetAddressInfoExCallback(Int32 error, Int32 bytes, NativeOverlapped* overlapped)
--- End of stack trace from previous location ---
   at System.Net.Dns.<GetAddrInfoWithTelemetryAsync>g__CompleteAsync|34_0[T](Task task, String hostName, Int64 startingTimestamp)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync[TResult](Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at OnAim.Admin.Infrasturcture.Repository.RoleRepository.GetAllRoles() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.Infrasturcture\Repositories\RoleRepository.cs:line 37
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.GetEndpointsByRolesAsync() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 19
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.RolesContainPermission(List`1 roles, String permission) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 44
   at OnAim.Admin.API.Middleware.PermissionMiddleware.Invoke(HttpContext context, IPermissionService permissionService, ILogRepository auditLogService, ISecurityContextAccessor securityContextAccessor) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Middlewares\PermissionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-01-17 10:31:15.889 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Net.Sockets.SocketException (11001): No such host is known.
   at System.Net.NameResolutionPal.ProcessResult(SocketError errorCode, GetAddrInfoExContext* context)
   at System.Net.NameResolutionPal.GetAddressInfoExCallback(Int32 error, Int32 bytes, NativeOverlapped* overlapped)
--- End of stack trace from previous location ---
   at System.Net.Dns.<GetAddrInfoWithTelemetryAsync>g__CompleteAsync|34_0[T](Task task, String hostName, Int64 startingTimestamp)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync[TResult](Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at OnAim.Admin.Infrasturcture.Repository.RoleRepository.GetAllRoles() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.Infrasturcture\Repositories\RoleRepository.cs:line 37
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.GetEndpointsByRolesAsync() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 19
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.RolesContainPermission(List`1 roles, String permission) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 44
   at OnAim.Admin.API.Middleware.PermissionMiddleware.Invoke(HttpContext context, IPermissionService permissionService, ILogRepository auditLogService, ISecurityContextAccessor securityContextAccessor) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Middlewares\PermissionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-17 10:31:15.900 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null text/plain; charset=utf-8 2714.1092ms
2025-01-17 10:32:15.792 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678!;Pooling=true;
2025-01-17 10:32:15.874 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "postgres"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.Exists()
   at Microsoft.EntityFrameworkCore.Migrations.HistoryRepository.GetAppliedMigrations()
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "postgres"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-01-17 10:32:15.979 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:32:16.053 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:32:16.080 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:32:16.081 +04:00 [INF] Hosting environment: Development
2025-01-17 10:32:16.082 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:32:16.760 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:32:16.851 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 35.7946 ms
2025-01-17 10:32:16.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:32:16.855 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:32:16.856 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 97.4411ms
2025-01-17 10:32:16.861 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.0274ms
2025-01-17 10:32:16.879 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.9101ms
2025-01-17 10:32:16.900 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:32:17.258 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 353.6071 ms
2025-01-17 10:32:17.260 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 359.6292ms
2025-01-17 10:32:24.492 +04:00 [INF] Request starting HTTP/1.1 HEAD http://localhost:5192/ - null null
2025-01-17 10:32:24.496 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:32:24.605 +04:00 [INF] HTTP HEAD / responded 404 in 110.5342 ms
2025-01-17 10:32:24.607 +04:00 [INF] Request finished HTTP/1.1 HEAD http://localhost:5192/ - 404 null null 114.9182ms
2025-01-17 10:32:24.609 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: HEAD http://localhost:5192/, Response status code: 404
2025-01-17 10:33:03.006 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:33:03.011 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:33:03.157 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:33:03.199 +04:00 [ERR] An error occurred using the connection to database 'jan6' on server 'tcp://192.168.88.138:5432'.
2025-01-17 10:33:03.204 +04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'OnAim.Admin.Infrasturcture.Persistance.Data.Admin.DatabaseContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "postgres"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "postgres"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "postgres"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "postgres"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-01-17 10:33:03.323 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 313.2937 ms
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "postgres"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at OnAim.Admin.Infrasturcture.Repository.RoleRepository.GetAllRoles() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.Infrasturcture\Repositories\RoleRepository.cs:line 37
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.GetEndpointsByRolesAsync() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 19
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.RolesContainPermission(List`1 roles, String permission) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 44
   at OnAim.Admin.API.Middleware.PermissionMiddleware.Invoke(HttpContext context, IPermissionService permissionService, ILogRepository auditLogService, ISecurityContextAccessor securityContextAccessor) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Middlewares\PermissionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "postgres"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-01-17 10:33:03.333 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "postgres"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|34_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at OnAim.Admin.Infrasturcture.Repository.RoleRepository.GetAllRoles() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.Infrasturcture\Repositories\RoleRepository.cs:line 37
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.GetEndpointsByRolesAsync() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 19
   at OnAim.Admin.APP.Services.Admin.AuthServices.PermissionService.RolesContainPermission(List`1 roles, String permission) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\AdminServices\AuthServices\PermissionService.cs:line 44
   at OnAim.Admin.API.Middleware.PermissionMiddleware.Invoke(HttpContext context, IPermissionService permissionService, ILogRepository auditLogService, ISecurityContextAccessor securityContextAccessor) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Middlewares\PermissionMiddleware.cs:line 65
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "postgres"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-01-17 10:33:03.345 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null text/plain; charset=utf-8 339.1891ms
2025-01-17 10:33:22.626 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:33:22.783 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:33:22.793 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:33:22.814 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:33:22.832 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:33:22.833 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:33:22.839 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:33:22.891 +04:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:33:22.905 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:33:23.016 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:33:23.100 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:33:23.138 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:33:23.139 +04:00 [INF] Hosting environment: Development
2025-01-17 10:33:23.140 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:33:23.553 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:33:23.679 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 32.9791 ms
2025-01-17 10:33:23.680 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:33:23.681 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:33:23.683 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 132.4548ms
2025-01-17 10:33:23.684 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 3.5885ms
2025-01-17 10:33:23.698 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 16.7955ms
2025-01-17 10:33:23.718 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:33:24.096 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 376.2656 ms
2025-01-17 10:33:24.097 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 378.9333ms
2025-01-17 10:33:31.318 +04:00 [INF] Request starting HTTP/1.1 HEAD http://localhost:5192/ - null null
2025-01-17 10:33:31.321 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:33:31.433 +04:00 [INF] HTTP HEAD / responded 404 in 112.7409 ms
2025-01-17 10:33:31.434 +04:00 [INF] Request finished HTTP/1.1 HEAD http://localhost:5192/ - 404 null null 115.9856ms
2025-01-17 10:33:31.437 +04:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: HEAD http://localhost:5192/, Response status code: 404
2025-01-17 10:33:36.790 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 1937
2025-01-17 10:33:36.795 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:33:36.946 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:33:36.977 +04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:33:36.988 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:33:36.997 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:33:37.022 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:33:40.522 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 3521.6397ms
2025-01-17 10:33:40.525 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:33:40.553 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 3758.9971 ms
2025-01-17 10:33:40.556 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null application/json 3765.8743ms
2025-01-17 10:33:50.757 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 4297
2025-01-17 10:33:50.762 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:33:50.767 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:33:50.767 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:33:50.798 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:33:54.537 +04:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-17 10:33:54.547 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 3778.5908ms
2025-01-17 10:33:54.548 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:33:54.550 +04:00 [INF] HTTP POST /api/Promotion/CreatePromotion responded 400 in 3788.5538 ms
2025-01-17 10:33:54.551 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 400 null application/problem+json; charset=utf-8 3794.6376ms
2025-01-17 10:34:07.512 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:34:07.515 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:34:07.517 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:34:07.518 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:34:07.521 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:34:07.545 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:34:07.629 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:34:07.630 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:34:09.769 +04:00 [INF] Received HTTP response headers after 2136.9851ms - 200
2025-01-17 10:34:09.770 +04:00 [INF] End processing HTTP request after 2141.6114ms - 200
2025-01-17 10:34:09.791 +04:00 [INF] Promotion created successfully: 3
2025-01-17 10:34:09.796 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:34:09.796 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:34:09.810 +04:00 [INF] Received HTTP response headers after 12.488ms - 200
2025-01-17 10:34:09.811 +04:00 [INF] End processing HTTP request after 14.8779ms - 200
2025-01-17 10:34:09.812 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:34:09.812 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:34:34.936 +04:00 [INF] Received Raw Game Configuration: {
  "ValueKind": 1
}
2025-01-17 10:36:53.867 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:36:54.031 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:36:54.040 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:36:54.063 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:36:54.082 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:36:54.083 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:36:54.090 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:36:54.125 +04:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:36:54.153 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:36:54.275 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:36:54.359 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:36:54.389 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:36:54.389 +04:00 [INF] Hosting environment: Development
2025-01-17 10:36:54.390 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:36:55.231 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:36:55.340 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 40.1802 ms
2025-01-17 10:36:55.343 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 115.9452ms
2025-01-17 10:36:55.344 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:36:55.347 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:36:55.350 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 2.9886ms
2025-01-17 10:36:55.365 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.4291ms
2025-01-17 10:36:55.384 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:36:55.793 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 407.6544 ms
2025-01-17 10:36:55.795 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 411.1322ms
2025-01-17 10:37:16.481 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:37:16.490 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:37:16.491 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:37:16.717 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:37:16.739 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:37:16.751 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:37:16.759 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:37:16.782 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:37:16.862 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:37:16.915 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:37:16.916 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:37:17.474 +04:00 [INF] Received HTTP response headers after 555.7272ms - 200
2025-01-17 10:37:17.475 +04:00 [INF] End processing HTTP request after 561.2365ms - 200
2025-01-17 10:37:17.488 +04:00 [INF] Promotion created successfully: 4
2025-01-17 10:37:17.493 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:37:17.493 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:37:17.518 +04:00 [INF] Received HTTP response headers after 23.8851ms - 200
2025-01-17 10:37:17.519 +04:00 [INF] End processing HTTP request after 25.9715ms - 200
2025-01-17 10:37:17.520 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:37:17.521 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:37:23.266 +04:00 [INF] Received Raw Game Configuration: {
  "ValueKind": 1
}
2025-01-17 10:37:25.334 +04:00 [INF] Parsed Game Configuration as JObject: {
  "ValueKind": 1
}
2025-01-17 10:37:32.651 +04:00 [INF] Updated Game Configuration {
  "CorrelationId": "d8ab9f38-1497-4316-b37b-9eae0e13e6a9",
  "PromotionId": 4,
  "ValueKind": 1
}
2025-01-17 10:43:51.345 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:43:51.632 +04:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:43:51.646 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:43:51.669 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:43:51.686 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:43:51.687 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:43:51.694 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:43:51.729 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:43:51.743 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:43:51.860 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:43:51.941 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:43:51.969 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:43:51.970 +04:00 [INF] Hosting environment: Development
2025-01-17 10:43:51.970 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:43:52.768 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:43:52.872 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 36.2966 ms
2025-01-17 10:43:52.882 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:43:52.882 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:43:52.885 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 120.4369ms
2025-01-17 10:43:52.887 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.5764ms
2025-01-17 10:43:52.902 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.5377ms
2025-01-17 10:43:52.922 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:43:53.332 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 407.8242 ms
2025-01-17 10:43:53.334 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 411.6417ms
2025-01-17 10:44:16.459 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:44:16.469 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:44:16.472 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:44:16.696 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:44:16.720 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:44:16.732 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:44:16.740 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:44:16.764 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:44:16.848 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:44:16.901 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:44:16.902 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:44:17.810 +04:00 [INF] Received HTTP response headers after 905.7108ms - 200
2025-01-17 10:44:17.811 +04:00 [INF] End processing HTTP request after 911.5469ms - 200
2025-01-17 10:44:17.824 +04:00 [INF] Promotion created successfully: 5
2025-01-17 10:44:17.828 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:44:17.829 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:44:17.837 +04:00 [INF] Received HTTP response headers after 7.4978ms - 200
2025-01-17 10:44:17.838 +04:00 [INF] End processing HTTP request after 9.8609ms - 200
2025-01-17 10:44:17.839 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:44:17.840 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:44:29.805 +04:00 [INF] Updated Game Configuration {
  "CorrelationId": "53dd8f2e-9ac4-4734-8d06-d0bac405aef4",
  "PromotionId": 5
}
2025-01-17 10:45:31.235 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:45:31.379 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:45:31.388 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:45:31.411 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:45:31.431 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:45:31.432 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:45:31.438 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:45:31.475 +04:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:45:31.491 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:45:31.603 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:45:31.675 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:45:31.722 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:45:31.723 +04:00 [INF] Hosting environment: Development
2025-01-17 10:45:31.723 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:45:32.745 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:45:32.848 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 38.2153 ms
2025-01-17 10:45:32.850 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:45:32.850 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:45:32.853 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 111.2227ms
2025-01-17 10:45:32.863 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 13.5303ms
2025-01-17 10:45:32.878 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.3655ms
2025-01-17 10:45:32.900 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:45:33.336 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 434.7988 ms
2025-01-17 10:45:33.338 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 438.6164ms
2025-01-17 10:45:45.893 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:45:45.897 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:45:45.898 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:45:46.145 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:45:46.168 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:45:46.180 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:45:46.188 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:45:46.211 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:45:46.290 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:45:46.344 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:45:46.345 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:45:52.964 +04:00 [INF] Received HTTP response headers after 6615.948ms - 200
2025-01-17 10:45:52.967 +04:00 [INF] End processing HTTP request after 6623.4938ms - 200
2025-01-17 10:45:52.981 +04:00 [INF] Promotion created successfully: 6
2025-01-17 10:45:52.985 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:45:52.986 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:45:52.997 +04:00 [INF] Received HTTP response headers after 10.0967ms - 200
2025-01-17 10:45:52.997 +04:00 [INF] End processing HTTP request after 12.9706ms - 200
2025-01-17 10:45:52.999 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:45:52.999 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:46:46.407 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:46:46.688 +04:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:46:46.699 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:46:46.728 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:46:46.746 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:46:46.747 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:46:46.753 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:46:46.789 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:46:46.804 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:46:46.920 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:46:46.996 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:46:47.032 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:46:47.033 +04:00 [INF] Hosting environment: Development
2025-01-17 10:46:47.034 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:46:47.484 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:46:47.608 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 44.8911 ms
2025-01-17 10:46:47.609 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:46:47.611 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:46:47.618 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.7258ms
2025-01-17 10:46:47.618 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 137.2998ms
2025-01-17 10:46:47.632 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.315ms
2025-01-17 10:46:47.658 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:46:48.033 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 373.0526 ms
2025-01-17 10:46:48.035 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 377.1243ms
2025-01-17 10:47:01.054 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:47:01.058 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:47:01.060 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:47:01.286 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:47:01.311 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:47:01.322 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:47:01.330 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:47:01.353 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:47:01.435 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:47:01.489 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:47:01.490 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:47:02.384 +04:00 [INF] Received HTTP response headers after 888.8775ms - 200
2025-01-17 10:47:02.387 +04:00 [INF] End processing HTTP request after 899.3205ms - 200
2025-01-17 10:47:02.409 +04:00 [INF] Promotion created successfully: 7
2025-01-17 10:47:02.415 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:47:02.417 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:47:02.428 +04:00 [INF] Received HTTP response headers after 10.3828ms - 200
2025-01-17 10:47:02.429 +04:00 [INF] End processing HTTP request after 13.4307ms - 200
2025-01-17 10:47:02.430 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:47:02.431 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:47:22.302 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:47:22.475 +04:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:47:22.486 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:47:22.518 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:47:22.538 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:47:22.543 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:47:22.549 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:47:22.590 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:47:22.607 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:47:22.745 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:47:22.837 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:47:22.870 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:47:22.871 +04:00 [INF] Hosting environment: Development
2025-01-17 10:47:22.872 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:47:23.392 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:47:23.488 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 35.8144 ms
2025-01-17 10:47:23.491 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:47:23.492 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 102.4271ms
2025-01-17 10:47:23.495 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.1975ms
2025-01-17 10:47:23.496 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:47:23.511 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.7161ms
2025-01-17 10:47:23.528 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:47:23.898 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 368.1555 ms
2025-01-17 10:47:23.900 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 371.3701ms
2025-01-17 10:47:35.923 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:47:35.928 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:47:35.930 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:47:36.153 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:47:36.176 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:47:36.187 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:47:36.195 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:47:36.219 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:47:36.300 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:47:36.354 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:47:36.356 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:47:37.832 +04:00 [INF] Received HTTP response headers after 1474.4885ms - 200
2025-01-17 10:47:37.833 +04:00 [INF] End processing HTTP request after 1480.5612ms - 200
2025-01-17 10:47:37.846 +04:00 [INF] Promotion created successfully: 8
2025-01-17 10:47:37.850 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:47:37.851 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:47:37.875 +04:00 [INF] Received HTTP response headers after 23.2122ms - 200
2025-01-17 10:47:37.876 +04:00 [INF] End processing HTTP request after 26.2243ms - 200
2025-01-17 10:47:37.878 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:47:37.878 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:51:25.434 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:51:25.578 +04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:51:25.587 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:51:25.610 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:51:25.627 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:51:25.629 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:51:25.635 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:51:25.670 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:51:25.684 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:51:25.802 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:51:25.883 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:51:25.913 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:51:25.913 +04:00 [INF] Hosting environment: Development
2025-01-17 10:51:25.914 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:51:26.749 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:51:26.847 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 33.8131 ms
2025-01-17 10:51:26.852 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 106.1785ms
2025-01-17 10:51:26.853 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:51:26.855 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:51:26.869 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 13.7516ms
2025-01-17 10:51:26.881 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.2102ms
2025-01-17 10:51:26.896 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:51:27.282 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 384.9368 ms
2025-01-17 10:51:27.286 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 389.5905ms
2025-01-17 10:51:48.013 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:51:48.022 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:51:48.024 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:51:48.254 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:51:48.280 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:51:48.293 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:51:48.300 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:51:48.326 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:51:48.407 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:51:48.456 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:51:48.457 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:51:49.035 +04:00 [INF] Received HTTP response headers after 575.9135ms - 200
2025-01-17 10:51:49.036 +04:00 [INF] End processing HTTP request after 581.1239ms - 200
2025-01-17 10:51:49.049 +04:00 [INF] Promotion created successfully: 9
2025-01-17 10:51:49.053 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:51:49.053 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:51:49.063 +04:00 [INF] Received HTTP response headers after 8.7028ms - 200
2025-01-17 10:51:49.064 +04:00 [INF] End processing HTTP request after 10.9545ms - 200
2025-01-17 10:51:49.065 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:51:49.066 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:52:52.216 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 10:52:52.437 +04:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:52:52.451 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:52:52.475 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:52:52.497 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 10:52:52.498 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 10:52:52.505 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 10:52:52.542 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 10:52:52.563 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 10:52:52.694 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 10:52:52.789 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 10:52:52.825 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 10:52:52.825 +04:00 [INF] Hosting environment: Development
2025-01-17 10:52:52.826 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 10:52:53.556 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 10:52:53.670 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 39.2172 ms
2025-01-17 10:52:53.675 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 10:52:53.676 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 10:52:53.677 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 123.0655ms
2025-01-17 10:52:53.680 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 5.4258ms
2025-01-17 10:52:53.695 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 19.1374ms
2025-01-17 10:52:53.718 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 10:52:54.119 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 398.9766 ms
2025-01-17 10:52:54.121 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 403.2585ms
2025-01-17 10:53:09.275 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2360
2025-01-17 10:53:09.282 +04:00 [INF] CORS policy execution successful.
2025-01-17 10:53:09.283 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 10:53:09.519 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 10:53:09.544 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 10:53:09.557 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 10:53:09.565 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 10:53:09.591 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 10:53:09.672 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 10:53:09.720 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:53:09.722 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 10:53:17.864 +04:00 [INF] Received HTTP response headers after 8137.9469ms - 200
2025-01-17 10:53:17.867 +04:00 [INF] End processing HTTP request after 8147.1482ms - 200
2025-01-17 10:53:17.888 +04:00 [INF] Promotion created successfully: 10
2025-01-17 10:53:17.895 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:53:17.896 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 10:53:17.906 +04:00 [INF] Received HTTP response headers after 8.7147ms - 200
2025-01-17 10:53:17.907 +04:00 [INF] End processing HTTP request after 11.7864ms - 200
2025-01-17 10:53:17.908 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 10:53:17.909 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 10:53:32.287 +04:00 [INF] Start processing HTTP request POST http://ocelotapigateway:8080/wheelApi/Admin/CreateConfiguration
2025-01-17 10:53:32.288 +04:00 [INF] Sending HTTP request POST http://ocelotapigateway:8080/wheelApi/Admin/CreateConfiguration
2025-01-17 11:31:02.331 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 11:31:02.480 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:31:02.490 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:31:02.511 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:31:02.527 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:31:02.528 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:31:02.535 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 11:31:02.576 +04:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 11:31:02.599 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 11:31:02.749 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 11:31:02.858 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 11:31:02.898 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 11:31:02.899 +04:00 [INF] Hosting environment: Development
2025-01-17 11:31:02.900 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 11:31:04.189 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 11:31:04.323 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 44.2212 ms
2025-01-17 11:31:04.330 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 141.1661ms
2025-01-17 11:31:04.334 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 11:31:04.339 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 11:31:04.346 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 7.6567ms
2025-01-17 11:31:04.357 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.0377ms
2025-01-17 11:31:04.378 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 11:31:04.842 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 462.4359 ms
2025-01-17 11:31:04.844 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 465.6398ms
2025-01-17 11:31:26.863 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2808
2025-01-17 11:31:26.877 +04:00 [INF] CORS policy execution successful.
2025-01-17 11:31:26.878 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 11:31:27.162 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 11:31:27.193 +04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 11:31:27.206 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 11:31:27.216 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 11:31:27.241 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 11:31:27.369 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 11:31:27.433 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:31:27.434 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:31:28.103 +04:00 [INF] Received HTTP response headers after 667.1111ms - 200
2025-01-17 11:31:28.104 +04:00 [INF] End processing HTTP request after 672.3438ms - 200
2025-01-17 11:31:28.117 +04:00 [INF] Promotion created successfully: 11
2025-01-17 11:31:28.121 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:31:28.122 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:31:28.131 +04:00 [INF] Received HTTP response headers after 8.0808ms - 200
2025-01-17 11:31:28.132 +04:00 [INF] End processing HTTP request after 10.9834ms - 200
2025-01-17 11:31:28.133 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 11:31:28.134 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 11:31:33.384 +04:00 [INF] {
  "id": 0,
  "name": "gbj",
  "value": 1,
  "isActive": true,
  "fromTemplateId": "string",
  "prices": [
    {
      "id": 10,
      "value": 10,
      "multiplier": 2,
      "coinId": "string"
    }
  ],
  "wheelPrizeGroups": [
    {
      "id": 0,
      "sequence": [
        1,
        2,
        3
      ],
      "nextPrizeIndex": 0,
      "configurationId": 0,
      "prizes": [
        {
          "id": 0,
          "value": 50,
          "probability": 50,
          "coinId": "coin1",
          "prizeGroupId": 0,
          "name": "Prize A",
          "wheelIndex": 1
        },
        {
          "id": 0,
          "value": 30,
          "probability": 30,
          "coinId": "coin2",
          "prizeGroupId": 0,
          "name": "Prize B",
          "wheelIndex": 2
        },
        {
          "id": 0,
          "value": 20,
          "probability": 20,
          "coinId": "coin3",
          "prizeGroupId": 0,
          "name": "Prize C",
          "wheelIndex": 3
        }
      ],
      "name": "string"
    }
  ],
  "correlationId": "662040ee-0f3e-4607-aadc-bc08f7b46f0c",
  "promotionId": 11
}
2025-01-17 11:31:59.733 +04:00 [INF] System.Net.Http.StringContent
2025-01-17 11:32:00.289 +04:00 [INF] Start processing HTTP request POST http://ocelotapigateway:8080/wheelApi/Admin/CreateConfiguration
2025-01-17 11:32:00.290 +04:00 [INF] Sending HTTP request POST http://ocelotapigateway:8080/wheelApi/Admin/CreateConfiguration
2025-01-17 11:32:40.177 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 11:32:40.312 +04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:32:40.321 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:32:40.341 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:32:40.358 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:32:40.359 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:32:40.366 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 11:32:40.399 +04:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 11:32:40.413 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 11:32:40.525 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 11:32:40.598 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 11:32:40.626 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 11:32:40.626 +04:00 [INF] Hosting environment: Development
2025-01-17 11:32:40.627 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 11:32:41.230 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 11:32:41.321 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 34.8054 ms
2025-01-17 11:32:41.323 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 11:32:41.325 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 97.0548ms
2025-01-17 11:32:41.325 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 11:32:41.333 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 9.5324ms
2025-01-17 11:32:41.349 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.923ms
2025-01-17 11:32:41.367 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 11:32:41.762 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 394.0234 ms
2025-01-17 11:32:41.764 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 397.1402ms
2025-01-17 11:32:57.396 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2808
2025-01-17 11:32:57.402 +04:00 [INF] CORS policy execution successful.
2025-01-17 11:32:57.404 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 11:32:57.636 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 11:32:57.661 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 11:32:57.673 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 11:32:57.681 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 11:32:57.707 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 11:32:57.794 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 11:32:57.842 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:32:57.843 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:32:58.367 +04:00 [INF] Received HTTP response headers after 522.0788ms - 200
2025-01-17 11:32:58.368 +04:00 [INF] End processing HTTP request after 527.0697ms - 200
2025-01-17 11:32:58.380 +04:00 [INF] Promotion created successfully: 12
2025-01-17 11:32:58.384 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:32:58.385 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:32:58.396 +04:00 [INF] Received HTTP response headers after 10.4703ms - 200
2025-01-17 11:32:58.397 +04:00 [INF] End processing HTTP request after 12.5686ms - 200
2025-01-17 11:32:58.398 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 11:32:58.398 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 11:33:02.812 +04:00 [INF] {
  "id": 0,
  "name": "gbj",
  "value": 1,
  "isActive": true,
  "fromTemplateId": "string",
  "prices": [
    {
      "id": 10,
      "value": 10,
      "multiplier": 2,
      "coinId": "string"
    }
  ],
  "wheelPrizeGroups": [
    {
      "id": 0,
      "sequence": [
        1,
        2,
        3
      ],
      "nextPrizeIndex": 0,
      "configurationId": 0,
      "prizes": [
        {
          "id": 0,
          "value": 50,
          "probability": 50,
          "coinId": "coin1",
          "prizeGroupId": 0,
          "name": "Prize A",
          "wheelIndex": 1
        },
        {
          "id": 0,
          "value": 30,
          "probability": 30,
          "coinId": "coin2",
          "prizeGroupId": 0,
          "name": "Prize B",
          "wheelIndex": 2
        },
        {
          "id": 0,
          "value": 20,
          "probability": 20,
          "coinId": "coin3",
          "prizeGroupId": 0,
          "name": "Prize C",
          "wheelIndex": 3
        }
      ],
      "name": "string"
    }
  ],
  "correlationId": "c82a4061-216c-42b9-ae0d-70d3c6b326c0",
  "promotionId": 12
}
2025-01-17 11:33:06.029 +04:00 [INF] System.Net.Http.StringContent
2025-01-17 11:33:06.872 +04:00 [INF] Start processing HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 11:33:06.873 +04:00 [INF] Sending HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 11:33:06.890 +04:00 [INF] Received HTTP response headers after 15.0455ms - 500
2025-01-17 11:33:06.891 +04:00 [INF] End processing HTTP request after 18.7825ms - 500
2025-01-17 11:35:06.085 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 11:35:06.275 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:35:06.284 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:35:06.310 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:35:06.333 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:35:06.342 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:35:06.349 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 11:35:06.388 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 11:35:06.408 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 11:35:06.551 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 11:35:06.656 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 11:35:06.692 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 11:35:06.693 +04:00 [INF] Hosting environment: Development
2025-01-17 11:35:06.697 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 11:35:07.082 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 11:35:07.203 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 40.7205 ms
2025-01-17 11:35:07.206 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 126.4488ms
2025-01-17 11:35:07.210 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 11:35:07.213 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 11:35:07.217 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 3.6989ms
2025-01-17 11:35:07.237 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.3544ms
2025-01-17 11:35:07.258 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 11:35:07.611 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 351.5456 ms
2025-01-17 11:35:07.612 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 354.429ms
2025-01-17 11:35:27.673 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2808
2025-01-17 11:35:27.682 +04:00 [INF] CORS policy execution successful.
2025-01-17 11:35:27.683 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 11:35:27.912 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 11:35:27.935 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 11:35:27.948 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 11:35:27.956 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 11:35:27.980 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 11:35:28.061 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 11:35:28.110 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:35:28.111 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 11:35:28.764 +04:00 [INF] Received HTTP response headers after 650.7731ms - 200
2025-01-17 11:35:28.765 +04:00 [INF] End processing HTTP request after 656.7603ms - 200
2025-01-17 11:35:28.778 +04:00 [INF] Promotion created successfully: 13
2025-01-17 11:35:28.782 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:35:28.783 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 11:35:28.805 +04:00 [INF] Received HTTP response headers after 21.1713ms - 200
2025-01-17 11:35:28.806 +04:00 [INF] End processing HTTP request after 24.2921ms - 200
2025-01-17 11:35:28.808 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 11:35:28.810 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 11:35:32.779 +04:00 [INF] {
  "id": 0,
  "name": "gbj",
  "value": 1,
  "isActive": true,
  "fromTemplateId": "string",
  "prices": [
    {
      "id": 10,
      "value": 10,
      "multiplier": 2,
      "coinId": "string"
    }
  ],
  "wheelPrizeGroups": [
    {
      "id": 0,
      "sequence": [
        1,
        2,
        3
      ],
      "nextPrizeIndex": 0,
      "configurationId": 0,
      "prizes": [
        {
          "id": 0,
          "value": 50,
          "probability": 50,
          "coinId": "coin1",
          "prizeGroupId": 0,
          "name": "Prize A",
          "wheelIndex": 1
        },
        {
          "id": 0,
          "value": 30,
          "probability": 30,
          "coinId": "coin2",
          "prizeGroupId": 0,
          "name": "Prize B",
          "wheelIndex": 2
        },
        {
          "id": 0,
          "value": 20,
          "probability": 20,
          "coinId": "coin3",
          "prizeGroupId": 0,
          "name": "Prize C",
          "wheelIndex": 3
        }
      ],
      "name": "string"
    }
  ],
  "correlationId": "5f947042-b513-49e6-8376-b14653bcd61d",
  "promotionId": 13
}
2025-01-17 11:35:35.931 +04:00 [INF] System.Net.Http.StringContent
2025-01-17 11:35:36.392 +04:00 [INF] Start processing HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 11:35:36.393 +04:00 [INF] Sending HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 11:35:36.553 +04:00 [INF] Received HTTP response headers after 158.4524ms - 500
2025-01-17 11:35:36.554 +04:00 [INF] End processing HTTP request after 161.2347ms - 500
2025-01-17 11:36:22.681 +04:00 [ERR] Error creating game configuration.
System.Exception: Request to CreateConfiguration failed with status InternalServerError. Response: {"Succeeded":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Error":null,"ValidationErrors":null,"Data":null}
 ---> System.Net.Http.HttpRequestException: Request to CreateConfiguration failed with status InternalServerError. Response: {"Succeeded":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Error":null,"ValidationErrors":null,"Data":null}
   at OnAim.Admin.APP.Services.Game.GameService.CreateConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\GameServices\GameService.cs:line 138
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreateGameConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 693
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreateGameConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 698
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 546
2025-01-17 11:36:22.692 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.693 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.695 +04:00 [INF] Received HTTP response headers after 1.6454ms - 405
2025-01-17 11:36:22.696 +04:00 [INF] End processing HTTP request after 3.5853ms - 405
2025-01-17 11:36:22.854 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 11:36:22.894 +04:00 [ERR] Error processing game configurations.
System.Exception: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 719
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 552
2025-01-17 11:36:22.903 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.903 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.904 +04:00 [INF] Received HTTP response headers after 0.7555ms - 405
2025-01-17 11:36:22.905 +04:00 [INF] End processing HTTP request after 2.294ms - 405
2025-01-17 11:36:22.941 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 11:36:22.972 +04:00 [ERR] Error during Saga execution.
System.Exception: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 719
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 568
2025-01-17 11:36:22.981 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.982 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 11:36:22.984 +04:00 [INF] Received HTTP response headers after 0.6718ms - 405
2025-01-17 11:36:22.984 +04:00 [INF] End processing HTTP request after 3.3622ms - 405
2025-01-17 11:36:23.021 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 11:36:23.073 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 55114.5166ms
2025-01-17 11:36:23.076 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 11:36:23.135 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 55453.9958 ms
2025-01-17 11:36:23.138 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null application/json 55465.061ms
2025-01-17 11:36:47.527 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 11:36:47.701 +04:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:36:47.716 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:36:47.738 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:36:47.772 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 11:36:47.774 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 11:36:47.781 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 11:36:47.822 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 11:36:47.844 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 11:36:47.993 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 11:36:48.089 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 11:36:48.128 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 11:36:48.129 +04:00 [INF] Hosting environment: Development
2025-01-17 11:36:48.129 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 11:36:48.421 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 11:36:48.534 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 40.6688 ms
2025-01-17 11:36:48.536 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 11:36:48.536 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 11:36:48.538 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 121.0143ms
2025-01-17 11:36:48.540 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 4.2425ms
2025-01-17 11:36:48.562 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9806ms
2025-01-17 11:36:48.584 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 11:36:48.971 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 385.6335 ms
2025-01-17 11:36:48.973 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 388.723ms
2025-01-17 12:11:05.664 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 12:11:05.810 +04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:11:05.820 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 12:11:05.842 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:11:05.861 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:11:05.862 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 12:11:05.869 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 12:11:05.915 +04:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 12:11:05.930 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 12:11:06.059 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 12:11:06.164 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 12:11:06.197 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 12:11:06.197 +04:00 [INF] Hosting environment: Development
2025-01-17 12:11:06.198 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 12:11:07.330 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 12:11:07.456 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 42.1647 ms
2025-01-17 12:11:07.460 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 12:11:07.461 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 135.6807ms
2025-01-17 12:11:07.464 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 3.97ms
2025-01-17 12:11:07.467 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 12:11:07.487 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.7575ms
2025-01-17 12:11:07.506 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 12:11:07.978 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 470.8512 ms
2025-01-17 12:11:07.982 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 476.6408ms
2025-01-17 12:11:54.799 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 1937
2025-01-17 12:11:54.805 +04:00 [INF] CORS policy execution successful.
2025-01-17 12:11:54.807 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 12:11:55.108 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 12:11:55.134 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 12:11:55.146 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:11:55.154 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 12:11:55.179 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 12:11:57.160 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 2001.8119ms
2025-01-17 12:11:57.162 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:11:57.206 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 2402.8616 ms
2025-01-17 12:11:57.209 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null application/json 2409.8566ms
2025-01-17 12:11:59.383 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2378
2025-01-17 12:11:59.390 +04:00 [INF] CORS policy execution successful.
2025-01-17 12:11:59.398 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:11:59.399 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 12:11:59.431 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 12:11:59.454 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 12:11:59.514 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:11:59.515 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:12:00.408 +04:00 [INF] Received HTTP response headers after 891.4165ms - 200
2025-01-17 12:12:00.410 +04:00 [INF] End processing HTTP request after 897.5679ms - 200
2025-01-17 12:12:00.424 +04:00 [INF] Promotion created successfully: 14
2025-01-17 12:12:00.428 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:12:00.428 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:12:00.443 +04:00 [INF] Received HTTP response headers after 14.0738ms - 200
2025-01-17 12:12:00.444 +04:00 [INF] End processing HTTP request after 16.5016ms - 200
2025-01-17 12:12:00.445 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 12:12:00.446 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 12:12:06.136 +04:00 [INF] Start processing HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:12:06.137 +04:00 [INF] Sending HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:12:06.160 +04:00 [INF] Received HTTP response headers after 22.0774ms - 500
2025-01-17 12:12:06.160 +04:00 [INF] End processing HTTP request after 24.6743ms - 500
2025-01-17 12:13:14.177 +04:00 [ERR] Error creating game configuration.
System.Exception: Request to CreateConfiguration failed with status InternalServerError. Response: {"Succeeded":false,"Message":"Unexpected character encountered while parsing value: [. Path \u0027id\u0027, line 1, position 7.","Error":null,"ValidationErrors":null,"Data":null}
 ---> System.Net.Http.HttpRequestException: Request to CreateConfiguration failed with status InternalServerError. Response: {"Succeeded":false,"Message":"Unexpected character encountered while parsing value: [. Path \u0027id\u0027, line 1, position 7.","Error":null,"ValidationErrors":null,"Data":null}
   at OnAim.Admin.APP.Services.Game.GameService.CreateConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\GameServices\GameService.cs:line 135
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreateGameConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 693
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreateGameConfiguration(String name, Object configurationJson) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 698
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 546
2025-01-17 12:13:14.219 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.220 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.223 +04:00 [INF] Received HTTP response headers after 2.1425ms - 405
2025-01-17 12:13:14.224 +04:00 [INF] End processing HTTP request after 4.6733ms - 405
2025-01-17 12:13:14.286 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 12:13:14.320 +04:00 [ERR] Error processing game configurations.
System.Exception: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 719
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 552
2025-01-17 12:13:14.331 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.331 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.333 +04:00 [INF] Received HTTP response headers after 1.3706ms - 405
2025-01-17 12:13:14.334 +04:00 [INF] End processing HTTP request after 3.0197ms - 405
2025-01-17 12:13:14.369 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 12:13:14.403 +04:00 [ERR] Error during Saga execution.
System.Exception: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
   --- End of inner exception stack trace ---
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 719
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CreatePromotion(CreatePromotionDto request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 568
2025-01-17 12:13:14.413 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.414 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/DeletePromotion
2025-01-17 12:13:14.415 +04:00 [INF] Received HTTP response headers after 0.8807ms - 405
2025-01-17 12:13:14.416 +04:00 [INF] End processing HTTP request after 3.1853ms - 405
2025-01-17 12:13:14.452 +04:00 [ERR] Failed to create promotion.
System.Text.Json.JsonException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. Path: $ | LineNumber: 0 | BytePositionInLine: 0.
 ---> System.Text.Json.JsonReaderException: The input does not contain any JSON tokens. Expected the input to start with a valid JSON token, when isFinalBlock is true. LineNumber: 0 | BytePositionInLine: 0.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, JsonReaderException ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException.<>c__DisplayClass0_0.<<-ctor>b__0>d.MoveNext() in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.<>c__DisplayClass16_0`1.<Run>b__0(Task`1 t)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Nito.AsyncEx.Synchronous.TaskExtensions.WaitAndUnwrapException[TResult](Task`1 task)
   at Nito.AsyncEx.AsyncContext.Run[TResult](Func`1 action)
   at OnAim.Admin.CrossCuttingConcerns.Exceptions.HubAPIRequestFailedException..ctor(HttpResponseMessage res) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.CrossCuttingConcerns\Exceptions\HubAPIRequestFailedException.cs:line 10
   at OnAim.Admin.APP.Services.Hub.ClientServices.HubApiClient.PostAsJson(String uri, Object obj, CancellationToken ct) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\ClientServices\HubApiClient.cs:line 102
   at OnAim.Admin.APP.Services.Hub.Promotion.PromotionService.CompensateAsync(Guid request) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.APP\Services\HubServices\Promotion\PromotionService.cs:line 712
2025-01-17 12:13:14.501 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 75100.3606ms
2025-01-17 12:13:14.502 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:13:14.531 +04:00 [ERR] HTTP POST /api/Promotion/CreatePromotion responded 500 in 75141.6578 ms
2025-01-17 12:13:14.532 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 500 null application/json 75148.9768ms
2025-01-17 12:13:16.665 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2378
2025-01-17 12:13:16.668 +04:00 [INF] CORS policy execution successful.
2025-01-17 12:13:16.670 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:13:16.671 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 12:13:16.674 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 12:13:16.682 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 12:13:16.684 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:13:16.685 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:13:23.888 +04:00 [INF] Received HTTP response headers after 7202.4269ms - 200
2025-01-17 12:13:23.890 +04:00 [INF] End processing HTTP request after 7205.3806ms - 200
2025-01-17 12:13:23.893 +04:00 [INF] Promotion created successfully: 15
2025-01-17 12:13:23.894 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:13:23.895 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:13:23.917 +04:00 [INF] Received HTTP response headers after 21.0903ms - 200
2025-01-17 12:13:23.918 +04:00 [INF] End processing HTTP request after 23.6377ms - 200
2025-01-17 12:13:23.918 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 12:13:23.919 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 12:16:03.586 +04:00 [INF] Start processing HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:16:03.590 +04:00 [INF] Sending HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:16:03.662 +04:00 [INF] Received HTTP response headers after 67.8984ms - 500
2025-01-17 12:16:03.663 +04:00 [INF] End processing HTTP request after 77.0021ms - 500
2025-01-17 12:18:01.731 +04:00 [INF] Starting database migration. Connection String: Host=192.168.88.138;Port=5432;Database=jan6;Username=postgres;Password=12345678;Pooling=true;
2025-01-17 12:18:01.887 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:18:01.897 +04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 12:18:01.920 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:18:02.043 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-01-17 12:18:02.045 +04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-01-17 12:18:02.052 +04:00 [INF] Applying migration '20250115095933_init'.
2025-01-17 12:18:02.086 +04:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AllowedDomains" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Domain" text NOT NULL,
    "CreatedBy" integer,
    "IsDeleted" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "DateCreated" timestamp with time zone NOT NULL,
    "DateUpdated" timestamp with time zone NOT NULL,
    "DateDeleted" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AllowedDomains" PRIMARY KEY ("Id")
);
2025-01-17 12:18:02.101 +04:00 [ERR] An error occurred while applying migrations.
Npgsql.PostgresException (0x80004005): 42P07: relation "AllowedDomains" already exists
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult()
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery(Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IEnumerable`1 migrationCommands, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Migrations.Internal.NpgsqlMigrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at OnAim.Admin.API.Extensions.MigrationExtensions.ApplyMigrations(IApplicationBuilder app) in C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API\Extensions\MigrationExtensions.cs:line 19
  Exception data:
    Severity: ERROR
    SqlState: 42P07
    MessageText: relation "AllowedDomains" already exists
    File: heap.c
    Line: 1151
    Routine: heap_create_with_catalog
2025-01-17 12:18:02.249 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 12:18:02.340 +04:00 [INF] Now listening on: http://localhost:5192
2025-01-17 12:18:02.380 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 12:18:02.381 +04:00 [INF] Hosting environment: Development
2025-01-17 12:18:02.383 +04:00 [INF] Content root path: C:\Users\user\Desktop\Work\OnAimHub\Admin\OnAim.Admin.API
2025-01-17 12:18:03.003 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/index.html - null null
2025-01-17 12:18:03.116 +04:00 [INF] HTTP GET /swagger/index.html responded 200 in 36.4272 ms
2025-01-17 12:18:03.121 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - null null
2025-01-17 12:18:03.122 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/_vs/browserLink - null null
2025-01-17 12:18:03.126 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/index.html - 200 null text/html;charset=utf-8 126.1371ms
2025-01-17 12:18:03.129 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 8.2084ms
2025-01-17 12:18:03.152 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.2269ms
2025-01-17 12:18:03.174 +04:00 [INF] Request starting HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - null null
2025-01-17 12:18:03.561 +04:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 383.2354 ms
2025-01-17 12:18:03.562 +04:00 [INF] Request finished HTTP/1.1 GET http://localhost:5192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 388.129ms
2025-01-17 12:18:22.348 +04:00 [INF] Request starting HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - application/json 2378
2025-01-17 12:18:22.354 +04:00 [INF] CORS policy execution successful.
2025-01-17 12:18:22.355 +04:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 12:18:22.584 +04:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-01-17 12:18:22.607 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."Name", r."Description", r."IsActive", t0."EndpointGroupId", t0."Name", t0."Description", t0."RoleId", t0."Id", t0."Id0", t0."Name0", t0."Path", t0."Description0", t0."EndpointGroupId0", t0."Id00"
FROM "Roles" AS r
LEFT JOIN (
    SELECT r1."EndpointGroupId", e2."Name", e2."Description", r1."RoleId", e2."Id", t."Id" AS "Id0", t."Name" AS "Name0", t."Path", t."Description" AS "Description0", t."EndpointGroupId" AS "EndpointGroupId0", t."Id0" AS "Id00"
    FROM "RoleEndpointGroups" AS r1
    INNER JOIN "EndpointGroups" AS e2 ON r1."EndpointGroupId" = e2."Id"
    LEFT JOIN (
        SELECT e3."EndpointId" AS "Id", e4."Name", e4."Path", e4."Description", e3."EndpointGroupId", e4."Id" AS "Id0"
        FROM "EndpointGroupEndpoints" AS e3
        INNER JOIN "Endpoints" AS e4 ON e3."EndpointId" = e4."Id"
    ) AS t ON e2."Id" = t."EndpointGroupId"
) AS t0 ON r."Id" = t0."RoleId"
WHERE r."IsActive" AND NOT (r."IsDeleted") AND r."IsActive" AND EXISTS (
    SELECT 1
    FROM "RoleEndpointGroups" AS r0
    INNER JOIN "EndpointGroups" AS e ON r0."EndpointGroupId" = e."Id"
    WHERE r."Id" = r0."RoleId" AND EXISTS (
        SELECT 1
        FROM "EndpointGroupEndpoints" AS e0
        INNER JOIN "Endpoints" AS e1 ON e0."EndpointId" = e1."Id"
        WHERE e."Id" = e0."EndpointGroupId" AND NOT (e1."IsDeleted") AND e1."IsActive"))
ORDER BY r."Id", t0."RoleId", t0."EndpointGroupId", t0."Id", t0."EndpointGroupId0", t0."Id0"
2025-01-17 12:18:22.622 +04:00 [INF] Executing endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:18:22.631 +04:00 [INF] Route matched with {action = "CreatePromotion", controller = "Promotion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePromotion(OnAim.Admin.APP.Services.Hub.Promotion.CreatePromotionDto) on controller OnAim.Admin.API.Controllers.PromotionController (OnAim.Admin.API).
2025-01-17 12:18:22.656 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__role_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT r."Id", r."CreatedBy", r."DateCreated", r."DateDeleted", r."DateUpdated", r."Description", r."IsActive", r."IsDeleted", r."Name"
FROM "Roles" AS r
WHERE r."Name" = @__role_0 AND r."IsActive" AND NOT (r."IsDeleted")
LIMIT 1
2025-01-17 12:18:22.735 +04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__endpoint_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."CreatedBy", e."DateCreated", e."DateDeleted", e."DateUpdated", e."Description", e."IsActive", e."IsDeleted", e."Name", e."Path", e."Type"
FROM "Endpoints" AS e
WHERE e."Name" = @__endpoint_0
LIMIT 1
2025-01-17 12:18:22.783 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:18:22.784 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:8003/hubapi/Admin/CreatePromotion
2025-01-17 12:18:25.348 +04:00 [INF] Received HTTP response headers after 2561.9093ms - 200
2025-01-17 12:18:25.349 +04:00 [INF] End processing HTTP request after 2567.4845ms - 200
2025-01-17 12:18:25.362 +04:00 [INF] Promotion created successfully: 16
2025-01-17 12:18:25.366 +04:00 [INF] Start processing HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:18:25.367 +04:00 [INF] Sending HTTP request POST http://192.168.88.138:5004/api/v1/Leaderboard/CreateLeaderboardRecord
2025-01-17 12:18:25.376 +04:00 [INF] Received HTTP response headers after 8.1384ms - 200
2025-01-17 12:18:25.377 +04:00 [INF] End processing HTTP request after 10.6269ms - 200
2025-01-17 12:18:25.378 +04:00 [INF] LeaderboardRecord created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 12:18:25.379 +04:00 [INF] Leaderboard created successfully: {Leaderboard}
2025-01-17 12:18:30.671 +04:00 [INF] Start processing HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:18:30.672 +04:00 [INF] Sending HTTP request POST http://localhost:5001/WheelApi/Admin/CreateConfiguration
2025-01-17 12:18:30.811 +04:00 [INF] Received HTTP response headers after 136.267ms - 200
2025-01-17 12:18:30.811 +04:00 [INF] End processing HTTP request after 139.9945ms - 200
2025-01-17 12:18:32.850 +04:00 [INF] Game configuration created successfully: OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult
2025-01-17 12:18:32.853 +04:00 [INF] Game configuration created successfully: {Configuration}
2025-01-17 12:18:32.855 +04:00 [INF] Saga completed successfully.
2025-01-17 12:18:32.862 +04:00 [INF] Executing OkObjectResult, writing value of type 'OnAim.Admin.Contracts.ApplicationInfrastructure.ApplicationResult'.
2025-01-17 12:18:32.871 +04:00 [INF] Executed action OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API) in 10236.7ms
2025-01-17 12:18:32.872 +04:00 [INF] Executed endpoint 'OnAim.Admin.API.Controllers.PromotionController.CreatePromotion (OnAim.Admin.API)'
2025-01-17 12:18:32.898 +04:00 [INF] HTTP POST /api/Promotion/CreatePromotion responded 200 in 10545.7397 ms
2025-01-17 12:18:32.901 +04:00 [INF] Request finished HTTP/1.1 POST http://localhost:5192/api/Promotion/CreatePromotion - 200 null application/json; charset=utf-8 10553.0409ms
